### 视音频技术

本文学习资源来自雷神CSDN

[[总结]视音频编解码技术零基础学习方法](https://blog.csdn.net/leixiaohua1020/article/details/18893769)

#### 0.生活中的视音频技术

我们的电脑中可能会存着形形色色的视频资源，而我们通常也会注意到，这些视频肯定会有用不同的后缀名表示 `avi` 、`rmvb` 、`mp4` 、 `flv` 、`mkv` 等 ；这里需要注意到的是，这些格式代表的是 **封装格式**  。

何为封装格式 ？ 

> 就是把视频数据和音频数据打包成一个文件的规范 

仅仅靠看文件的后缀 ，很难看出具体使用了什么**视音频编码标准**；总的来说， 不同的封装格式之间的差距其实不大 ，各有优势

注 ： 有些封装格式支持的视音频编码标准十分广泛，应该算比较优秀的封装格式，比如mkv ;有些封装格式支持的视音频编码标准很少，算是比较落后的封装格式，比如RMVB

#### 1.视频播放器原理

视音频技术主要包括以下几点 ：**封装技术** ，**视频压缩编码技术**和**音频压缩编码技术** ，如果考虑到网络传输的话，还包括**流媒体技术**

视频播放器播放一个互联网上的视频文件，需要经过一下的步骤：

1. 解协议
2. 解封装
3. 解码音视频
4. 音视频同步



**解协议**的作用 ，就是将流媒体的协议，解析为标准的相应的封装格式数据 。

​	视音频在网上传播的时候，通常会采用各种流媒体协议，例如 HTTP、MMS、RTMP等等，这些协议在传输音视频数据的同时，也会传播一些信令数据。这些信令数据包括对视频的控制（播放、暂停、停止），或者对网络状态的描述等。解协议的同时会去除掉信令数据，只保留视音频数据。例如，采用采用RTMP协议传输的数据，经解析后，输出FLV格式的数据。

**解封装**的作用，就是将输入的封装格式的数据，分离成为`音频流压缩编码数据`和`视频流压缩编码数据` 。

​        封装格式种类很多，例如 `mp4` 、`rmvb` 、`mkv` 、`ts` 、`flv` 、`avi` ,它的作用就是将已经压缩编码的视频数据和音频数据按照一定的格式放在一起。

**解码**的作用，就是将音频/视频压缩编码数据，解析为非压缩的音频/视频的原始数据。

​		音频的压缩编码标准包含 `AAC` `MP3` `AC-3` 等等

​	 	视频的压缩编码标准包含 `H.264` `MPEG2` `VC-1` 等等

**视音频同步**的作用，就是解封装模块处理过程中获取到的参数信息，同步解码出来的视频数据和音频数据，并将视频音频数据发送至系统的声卡和显卡播放出来。



#### 2.流媒体协议

**流媒体协议是客户端与服务器直接通讯遵循的规定。当前网上主要的流媒体协议：**

|   名称   | 推出机构 | 传输层协议 |  客户端  |  目前使用领域   |
| :------: | :------: | :--------: | :------: | :-------------: |
| RTSP+RTP |   。。   |  TCP +UDP  | VLC, WMP |      IPTV       |
|   RTMP   |   。。   |    TCP     |  Flash   |   互联网直播    |
|  RTMFP   |   。。   |    UDP     |  Flash   |   互联网直播    |
|   MMS    |   。。   |  TCP/UDP   |   WMP    | 互联网直播+点播 |
|   HTTP   |   。。   |    TCP     |  Flash   |   互联网直播    |

**RTSP +RTP** 经常用于IPTV领域。其采用UDP传输视音频，支持组播，效率较高。但其缺点是网络不好的情况容易丢包，影响视频观看质量。

互联网视频服务通常 **TCP**作为其流媒体的传输层协议，因此 **RTMP** 、**MMS**、 **HTTP** 这类协议广泛用于互联网视音频服务之中。这类协议不会发生丢包，因而保证了视频的质量 ，但传输的效率相对会低一些。

**RTMFP** 是一种比较新的流媒体协议，特点是支持P2P



#### 3.封装格式



​								主要封装格式一览表

| 名称 | 推出 | 流媒体 |         支持的视频编码         |            支持的音频编码             |  目前使用领域  |
| :--: | :--: | :----: | :----------------------------: | :-----------------------------------: | :------------: |
| AVI  |      | 不支持 |          几乎所有格式          |             几乎所有格式              |   BT下载影视   |
| MP4  |      |  支持  | MPEG-2, MPEG-4, H.264, H.263等 | AAC, MPEG-1 Layers I, II, III, AC-3等 | 互联网视频网站 |
|  TS  |      |  支持  | MPEG-1, MPEG-2, MPEG-4, H.264  |    MPEG-1 Layers I, II, III, AAC,     | IPTV，数字电视 |
| FLV  |      |  支持  |      Sorenson, VP6, H.264      |     MP3, ADPCM, Linear PCM, AAC等     | 互联网视频网站 |
| MKV  |      |  支持  |          几乎所有格式          |             几乎所有格式              | 互联网视频网站 |
| RMVB |      |  支持  |       RealVideo 8, 9, 10       |  AAC, Cook Codec, RealAudio Lossless  |   BT下载影视   |

#### 4.视频编码

视频编码的主要作用是将视频像素数据（RGB，YUV等）压缩成为视频码流，从而降低视频的数据量。

####  5.音频编码

音频编码的主要作用是将音频采样数据（PCM等）压缩成为音频码流，从而降低音频的数据量。音频编码也是互联网视音频技术中一个重要的技术。

